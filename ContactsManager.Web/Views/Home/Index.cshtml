@{ 
    ViewBag.Title = "Contacts Manager";
}
<div ng-app="contactsApp">

    <div id="contactsController" ng-controller="contactsController" class="container-fluid" >
        <div class="row">
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q">
                        <div class="input-group-btn">
                            <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!--Edit window start-->
        <div id="myModal" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Contact Info</h4>
                    </div>
                    <div class="modal-body">
                        <form method="post" role="form">
                            <div class="form-group">
                                <label>First Name</label><br>
                                <input type="text" name="first_name" id="first_name" class="form-control" ng-model="editableObject.first_name" value="{{editableObject.first_name}}"><br>
                                <label>Last Name</label><br>
                                <input type="text" name="first_name" id="first_name" class="form-control" ng-model="editableObject.last_name" value="{{editableObject.last_name}}"><br>
                                <label>Gender</label><br>
                                <div class="radio">
                                    <label><input type="radio" ng-model="editableObject.gender" value="Male" name="optradio">Male</label>
                                </div>
                                <div class="radio">
                                    <label><input type="radio" ng-model="editableObject.gender" value="Female" name="optradio">Female</label>
                                </div>
                                <label>Job title</label><br>
                                <input type="text" name="first_name" id="first_name" class="form-control"  ng-model="editableObject.job_title"  value="{{editableObject.job_title}}"><br>
                                <label>Company name</label><br>
                                <input type="text" name="first_name" id="first_name" class="form-control"  ng-model="editableObject.company_name"  value="{{editableObject.company_name}}"><br>
                                <label>Email</label><br>
                                <input type="text" name="first_name" id="first_name" class="form-control"  ng-model="editableObject.email"  value="{{editableObject.email}}"><br>
                                <label>Phone</label><br>
                                <input type="text" name="first_name" id="first_name" class="form-control"  ng-model="editableObject.phone"  value="{{editableObject.phone}}"><br>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-success" data-dismiss="modal" ng-click="editObject(editableObject.id)">Save</button>
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                    </div>
                </div>

            </div>
        </div>
        <!--Edit window end-->


        <!--Delete confirmation window start-->
        <div id="deleteConfirmation" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Contact delete</h4>
                    </div>
                    <div class="modal-body">
                        <h1>Are you sure?</h1>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-success" data-dismiss="modal" ng-click="deleteObject(editableObject.id)">Yes</button>
                            <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <!--Delete confirmation window end-->
        <div id="additional_info" class="row">
            <p>Total items: {{contactsODataObject.Count}}</p>
        </div>        
        
        <!-- Contact list start -->
        <div class="row">
            <div class="contact" ng-repeat="contact in contactsODataObject.Items" >
                <div class="contact_avatar">
                    <img class="contact_avatar_img img-circle" ng-src="{{contact.avatar}}" />
                </div>
                <div class="contact_description">
                    {{contact.id}}
                    <div class="contact_description_title">
                        {{contact.first_name}} {{contact.last_name}}
                    </div>
                    <div class="contact_description_subtitle" >
                        {{contact.job_title}} at {{contact.company_name}}
                    </div>
                </div>
                <div class="contact_details">
                    <div class="contact_details_email">
                        <a target="_blank" ng-href="mailto:{{contact.email}}"> <i class="glyphicon glyphicon-envelope"></i>  {{contact.email}}</a>
                    </div>
                    <div class="contact_details_phone">
                        <span><i class="glyphicon glyphicon-phone"></i> {{contact.phone}}</span>
                    </div>
                </div>
                <div class="contact_controlls">
                    <button class="btn btn-default btn-default" data-toggle="modal" data-target="#myModal" ng-click="getObject(contact.id)"> <i class="glyphicon glyphicon-pencil"></i> </button>
                    <button class="btn btn-default btn-default label-danger" data-toggle="modal" data-target="#deleteConfirmation" ng-click="getObject(contact.id)"> <i class="glyphicon glyphicon-trash"></i> </button>
                </div>
            </div>
        </div>
        <!-- Contact list end -->
        <div class="ajaxLoadingContacts"> <i class="glyphicon glyphicon-refresh w3-spin w3-jumbo"></i> </div>
        
        <div class="menuButton">
            <button id="btnControlls" class="btn btn-default" data-toggle="modal" data-target="#myModal" ng-click="getObject(null)"><i class="glyphicon glyphicon-plus"></i></button>
        </div>
    </div>
</div>

@section scripts {
    @Scripts.Render("~/Scripts/angular.js")
    @Scripts.Render("~/Scripts/app/app.js")
    @Scripts.Render("~/Scripts/app/contactsService.js")
    @Scripts.Render("~/Scripts/app/Controllers/contactsController.js")
}